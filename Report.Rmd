---
title: "IBM HR Employee Attrition Analysis"
subtitle: "Statistical Computing Project"
author: "Amaan Shaikh | Danish Ali Shaikh | Rajat Pandey"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
    toc_depth: 2
    number_sections: true
    fig_caption: yes
geometry: "left=0.75in, right=0.75in, top=0.8in, bottom=0.8in"
fontsize: 11pt
---

```{r setup, include=FALSE}
# CLEAR ENVIRONMENT
rm(list = ls(all.names = TRUE))

# GLOBAL CHUNK OPTIONS
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  fig.width = 7,
  fig.height = 3.5,
  fig.align = "center",
  out.width = "90%"
)
```

# Introduction

The IBM HR Employee Attrition dataset serves as a sample of workforce data, organized as a data matrix of observations and qualitative and quantitative variables. This report performs a comprehensive descriptive statistical analysis to summarize the distribution of individual variables using frequencies, measures of location, and measures of dispersion. Bivariate techniques, including contingency tables and correlation coefficients, are applied to investigate the joint behavior and co-dependency between employee attributes and attrition. Furthermore, simple linear regression is utilized to model the linear relationship between tenure and monthly income by estimating the regression coefficients.

## Dataset & Data Preparation
We analyze ten key variables classified into the following datatypes :

- **Nominal**: `Attrition`, `OverTime`
- **Ordinal**: `JobLevel` (1-5), `JobSatisfaction` (1-4), `WorkLifeBalance` (1-4)
- **Numeric (Discrete)**: `Age`, `YearsAtCompany`, `TotalWorkingYears`, `NumCompaniesWorked`
- **Numeric (Continuous)**: `MonthlyIncome`

```{r load-data, echo=TRUE}
# Load data and select variables
hr <- read.csv("WA_Fn-UseC_-HR-Employee-Attrition.csv", stringsAsFactors = FALSE)
hr_sub <- hr[, c("Attrition", "OverTime", "JobLevel", "JobSatisfaction", 
                 "WorkLifeBalance","Age", "YearsAtCompany", "TotalWorkingYears", 
                 "NumCompaniesWorked", "MonthlyIncome")]

# Convert data types
hr_sub$Attrition <- factor(hr_sub$Attrition)
hr_sub$OverTime  <- factor(hr_sub$OverTime)
hr_sub$JobLevel <- factor(hr_sub$JobLevel, levels = 1:5, ordered = TRUE)
hr_sub$JobSatisfaction <- factor(hr_sub$JobSatisfaction, levels = 1:4, ordered = TRUE)
hr_sub$WorkLifeBalance <- factor(hr_sub$WorkLifeBalance, levels = 1:4, ordered = TRUE)
```

## Data Summary

```{r data-summary}
# Dataset dimensions
dim_table <- data.frame(
  Rows = nrow(hr_sub),
  Columns = ncol(hr_sub)
)

knitr::kable(dim_table, caption = "Dataset Dimensions")

# Summary statistics
summary(hr_sub)

# First 6 rows
knitr::kable(
  t(head(hr_sub)),
  caption = "First 6 Observations (Transposed View)",
  booktabs = TRUE
)
```

# Univariate Analysis

Univariate analysis examines each variable individually to understand its distribution, measures of location & measures of dispersion.

## Categorical and Ordinal Variables

### Attrition Status

Here we tabulate the absolute and relative frequencies of employees who left the company versus those who stayed.
```{r attrition-freq}
# Frequency and proportion table
attrition_tab <- as.data.frame(table(hr_sub$Attrition))
colnames(attrition_tab) <- c("Attrition", "Frequency")

attrition_tab$Proportion <- round(
  attrition_tab$Frequency / sum(attrition_tab$Frequency), 3
)

knitr::kable(
  attrition_tab,
  caption = "Attrition Status: Frequency and Proportion",
  align = c("l", "c", "c"),
  format = "markdown"
)
```

### Overtime Status
This shows the distribution of employees working overtime versus standard hours.
```{r overtime-freq}
# Frequency and proportion table
overtime_tab <- as.data.frame(table(hr_sub$OverTime))
colnames(overtime_tab) <- c("OverTime", "Frequency")

overtime_tab$Proportion <- round(
  overtime_tab$Frequency / sum(overtime_tab$Frequency), 3
)

knitr::kable(
  overtime_tab,
  caption = "Overtime Status: Frequency and Proportion",
  align = c("l", "c", "c"),
  format = "markdown"
)
```

### Job Level (Ordinal)

The frequency distributions reveal employee composition. The attrition rate indicates what proportion of employees left the company. Job level cumulative frequencies show the hierarchical distribution from entry-level to senior positions.

```{r joblevel-freq}
# Frequency table with percentages and cumulative frequencies
joblevel_freq <- as.data.frame(table(hr_sub$JobLevel))
colnames(joblevel_freq) <- c("Job Level", "Frequency")
joblevel_freq$Percentage <- round(100 * joblevel_freq$Frequency / sum(joblevel_freq$Frequency), 2)
joblevel_freq$`Cumulative Frequency` <- cumsum(joblevel_freq$Frequency)
joblevel_freq$`Cumulative %` <- cumsum(joblevel_freq$Percentage)

knitr::kable(joblevel_freq,
             caption = "Job Level Distribution (Ordinal)",
             align = c('c', 'c', 'c', 'c', 'c'),
             format = "markdown")
```

### Job Satisfaction (Ordinal)

Job satisfaction levels reveal employee contentment with their roles. The distribution shows how satisfaction is spread across the workforce, with higher levels indicating greater job fulfillment.

```{r jobsatisfaction-freq}
# Frequency table with percentages
jobsat_freq <- as.data.frame(table(hr_sub$JobSatisfaction))
colnames(jobsat_freq) <- c("Satisfaction Level", "Frequency")
jobsat_freq$Percentage <- round(100 * jobsat_freq$Frequency / sum(jobsat_freq$Frequency), 2)
jobsat_freq$`Cumulative %` <- cumsum(jobsat_freq$Percentage)

knitr::kable(jobsat_freq,
             caption = "Job Satisfaction Distribution (1=Low, 4=High)",
             align = c('c', 'c', 'c', 'c'),
             format = "markdown")
```

### Work-Life Balance (Ordinal)

Work-life balance distribution indicates how well employees manage their professional and personal lives. This metric is crucial for understanding employee well-being and potential burnout risks.

```{r worklife-balance}
# Frequency table with percentages
wlb_freq <- as.data.frame(table(hr_sub$WorkLifeBalance))
colnames(wlb_freq) <- c("Balance Level", "Frequency")
wlb_freq$Percentage <- round(100 * wlb_freq$Frequency / sum(wlb_freq$Frequency), 2)
wlb_freq$`Cumulative %` <- cumsum(wlb_freq$Percentage)

knitr::kable(wlb_freq,
             caption = "Work-Life Balance Distribution (1=Bad, 4=Best)",
             align = c('c', 'c', 'c', 'c'),
             format = "markdown")
```

### Visualizing Categorical Distributions
To better compare the distributions of these ordinal variables, we visualize them using bar charts.

```{r}
par(mfrow = c(1, 3)) # Arrange plots in 1 row, 3 columns

# Job Level
barplot(table(hr_sub$JobLevel), main="Job Level", 
        col="lightblue", xlab="Level", ylab="Count")

# Job Satisfaction
barplot(table(hr_sub$JobSatisfaction), main="Job Satisfaction", 
        col="lightgreen", xlab="Level", ylab="Count")

# Work Life Balance
barplot(table(hr_sub$WorkLifeBalance), main="Work Life Balance", 
        col="salmon", xlab="Level", ylab="Count")

par(mfrow = c(1, 1)) # Reset layout
```

## Numeric Variables

For quantitative variables, we analyze the distribution shape using histograms and boxplots, and we calculate measures of central tendency and dispersion.

### Age Distribution
The age distribution helps us understand the demographic maturity of the workforce.

```{r age-analysis, fig.height=4, fig.width=8}
# Set up side-by-side plots
par(mfrow = c(1, 2))

# Histogram
hist(hr_sub$Age, main="Histogram of Age", xlab="Age", 
     col="wheat", border="white")

# Boxplot
boxplot(hr_sub$Age, main="Boxplot of Age", ylab="Age", 
        col="wheat", horizontal=TRUE)

# Reset layout
par(mfrow = c(1, 1))

# Horizontal Summary Statistics
age_stats <- data.frame(
  Mean = round(mean(hr_sub$Age), 2),
  Median = median(hr_sub$Age),
  SD = round(sd(hr_sub$Age), 2),
  Min = min(hr_sub$Age),
  Max = max(hr_sub$Age)
)
knitr::kable(age_stats, caption = "Descriptive Statistics: Age")
```

### Monthly Income Distribution
Income is analyzed to detect skewness and potential outliers (high earners).

```{r}
par(mfrow = c(1, 2))

# Histogram
hist(hr_sub$MonthlyIncome, main="Histogram of Income", xlab="Monthly Income", 
     col="lightgray", border="white")

# Boxplot
boxplot(hr_sub$MonthlyIncome, main="Boxplot of Income", ylab="Income", 
        col="lightgray", horizontal=TRUE)

par(mfrow = c(1, 1))

# Horizontal Summary Statistics
inc_stats <- data.frame(
  Mean = round(mean(hr_sub$MonthlyIncome), 2),
  Median = median(hr_sub$MonthlyIncome),
  SD = round(sd(hr_sub$MonthlyIncome), 2),
  IQR = IQR(hr_sub$MonthlyIncome)
)
knitr::kable(inc_stats, caption = "Descriptive Statistics: Monthly Income")
```


### Years at Company (Tenure)
Tenure analysis reveals loyalty patterns and workforce stability.

```{r}
par(mfrow = c(1, 2))

# Histogram
hist(hr_sub$YearsAtCompany, main="Dist. of Tenure", xlab="Years", 
     col="lavender", border="white")

# Boxplot
boxplot(hr_sub$YearsAtCompany, main="Boxplot of Tenure", ylab="Years", 
        col="lavender", horizontal=TRUE)

par(mfrow = c(1, 1))

# Horizontal Summary Statistics
tenure_stats <- data.frame(
  Mean = round(mean(hr_sub$YearsAtCompany), 2),
  Median = median(hr_sub$YearsAtCompany),
  SD = round(sd(hr_sub$YearsAtCompany), 2),
  Max = max(hr_sub$YearsAtCompany)
)
knitr::kable(tenure_stats, caption = "Descriptive Statistics: Years at Company")
```

